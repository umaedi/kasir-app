<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Modal Pembayaran</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .modal-content {
        border-radius: 20px;
        border: none;
      }

      .info-card {
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
      }

      .total-belanja {
        background: linear-gradient(135deg, #4c8bf5 0%, #5a9dff 100%);
        color: white;
      }

      .kembalian {
        background: linear-gradient(135deg, #ff9f43 0%, #ffb74d 100%);
        color: white;
      }

      .info-card h6 {
        font-size: 12px;
        margin-bottom: 5px;
        opacity: 0.9;
      }

      .info-card h2 {
        font-size: 36px;
        font-weight: 700;
        margin: 0;
      }

      .form-label {
        color: #333;
        font-weight: 600;
        margin-bottom: 10px;
      }

      .form-control,
      .form-select {
        border-radius: 10px;
        border: 1px solid #e0e0e0;
        padding: 12px 15px;
        background-color: #f5f5f5;
      }

      .nominal-btn {
        border-radius: 10px;
        padding: 12px;
        border: 1px solid #e0e0e0;
        background-color: #f8f9fa;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: 600;
      }

      .nominal-btn:hover {
        background-color: #e9ecef;
        border-color: #4c8bf5;
      }

      .btn-batal {
        background: linear-gradient(135deg, #ff6b6b 0%, #ff5252 100%);
        color: white;
        border: none;
        border-radius: 15px;
        padding: 15px;
        font-weight: 600;
        font-size: 16px;
      }

      .btn-bayar {
        background: linear-gradient(135deg, #51cf66 0%, #5eead4 100%);
        color: white;
        border: none;
        border-radius: 15px;
        padding: 15px;
        font-weight: 600;
        font-size: 16px;
      }

      .btn-batal:hover {
        background: linear-gradient(135deg, #ff5252 0%, #ff4444 100%);
      }

      .btn-bayar:hover {
        background: linear-gradient(135deg, #40c057 0%, #4dd4ac 100%);
      }

      .nominal-bayar-label {
        font-size: 24px;
        font-weight: 400;
        color: #666;
      }

      .error-text {
        color: #ff6b6b;
        font-size: 12px;
        margin-top: 5px;
      }
    </style>
  </head>
  <body>
    <!-- Button trigger modal -->
    <button
      type="button"
      class="btn btn-primary btn-lg"
      data-bs-toggle="modal"
      data-bs-target="#modalPembayaran"
    >
      Buka Modal Pembayaranx
    </button>

    <!-- Modal -->
    <div
      class="modal fade"
      id="modalPembayaran"
      tabindex="-1"
      aria-labelledby="modalPembayaranLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-body p-3">
            <!-- Info Cards -->
            <div class="row">
              <div class="col-md-6">
                <div class="info-card total-belanja">
                  <h5>Total Belanja</h5>
                  <h3>Rp 24.000</h3>
                </div>
              </div>
              <div class="col-md-6">
                <div class="info-card kembalian">
                  <h5>Kembalian</h5>
                  <h3 id="kembalianAmount">Rp 0</h3>
                </div>
              </div>
            </div>
            <!-- Nama Customer & Nominal Bayar -->
            <div class="row">
              <div class="col-md-6">
                <label class="form-label">Nama Customer</label>
                <input
                  type="text"
                  class="form-control"
                  value="Umum"
                  placeholder="Masukkan nama customer"
                />
              </div>
              <div class="col-md-6">
                <label class="form-label">Nominal Bayar</label>
                <div class="input-group mb-3">
                  <span class="input-group-text" id="basic-addon1">Rp</span>
                  <input
                    type="number"
                    class="form-control"
                    id="nominalBayar"
                    placeholder="0"
                    min="0"
                  />
                </div>
                <div id="errorMessage" class="error-text" style="display: none">
                  Please fill out this field.
                </div>
              </div>
            </div>

            <!-- Quick Amount Buttons -->
            <div class="row g-2 mb-3">
              <div class="col-4">
                <button class="nominal-btn w-100" onclick="setNominal(2000)">
                  2.000
                </button>
              </div>
              <div class="col-4">
                <button class="nominal-btn w-100" onclick="setNominal(5000)">
                  5.000
                </button>
              </div>
              <div class="col-4">
                <button class="nominal-btn w-100" onclick="setNominal(10000)">
                  10.000
                </button>
              </div>
              <div class="col-4">
                <button class="nominal-btn w-100" onclick="setNominal(20000)">
                  20.000
                </button>
              </div>
              <div class="col-4">
                <button class="nominal-btn w-100" onclick="setNominal(50000)">
                  50.000
                </button>
              </div>
              <div class="col-4">
                <button class="nominal-btn w-100" onclick="setNominal(100000)">
                  100.000
                </button>
              </div>
            </div>

            <!-- Metode Pembayaran -->
            <div class="mb-4">
              <label class="form-label">Metode Pembayaran</label>
              <select class="form-select">
                <option selected>Pilih metode pembayaran</option>
                <option value="1">Tunai</option>
                <option value="2">Kartu Debit</option>
                <option value="3">Kartu Kredit</option>
                <option value="4">E-Wallet</option>
                <option value="5">Transfer Bank</option>
              </select>
            </div>

            <!-- Action Buttons -->
            <div class="row g-3">
              <div class="col-md-6">
                <button
                  type="button"
                  class="btn btn-batal w-100"
                  data-bs-dismiss="modal"
                >
                  Batal
                </button>
              </div>
              <div class="col-md-6">
                <button
                  type="button"
                  class="btn btn-bayar w-100"
                  onclick="prosesPembayaran()"
                >
                  Bayar
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      const totalBelanja = 24000;

      function formatRupiah(angka) {
        return "Rp " + angka.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
      }

      function hitungKembalian() {
        const nominalBayar =
          parseInt(document.getElementById("nominalBayar").value) || 0;
        const kembalian = nominalBayar - totalBelanja;

        if (kembalian >= 0) {
          document.getElementById("kembalianAmount").textContent =
            formatRupiah(kembalian);
          document.getElementById("errorMessage").style.display = "none";
        } else {
          document.getElementById("kembalianAmount").textContent = "Rp 0";
        }
      }

      function setNominal(amount) {
        document.getElementById("nominalBayar").value = amount;
        hitungKembalian();
      }

      document
        .getElementById("nominalBayar")
        .addEventListener("input", hitungKembalian);

      function prosesPembayaran() {
        const nominalBayar =
          parseInt(document.getElementById("nominalBayar").value) || 0;

        if (nominalBayar === 0) {
          document.getElementById("errorMessage").style.display = "block";
          return;
        }

        if (nominalBayar < totalBelanja) {
          alert("Nominal bayar kurang dari total belanja!");
          return;
        }

        alert(
          "Pembayaran berhasil!\nTotal: " +
            formatRupiah(totalBelanja) +
            "\nBayar: " +
            formatRupiah(nominalBayar) +
            "\nKembalian: " +
            formatRupiah(nominalBayar - totalBelanja)
        );

        // Close modal
        const modal = bootstrap.Modal.getInstance(
          document.getElementById("modalPembayaran")
        );
        modal.hide();
      }
    </script>
  </body>
</html>
